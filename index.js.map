{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function getImagesByQuery(query, page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '49742644-34971ccc2760c2b4b43c41938',\n      q: query,\n      page: page,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n    },\n  });\n  return response.data;\n}\nexport default getImagesByQuery;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      item => `<div class=\"image-container\"><li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${item.webformatURL}\">\n      <img \n      class=\"gallery-image\"\n      src=\"${item.largeImageURL}\"\n      data-source=\"${item.webformatURL}\"\n      alt=\"${item.tags}\"/>\n      </a>\n  </li>\n  <div class=\"text-container\">\n      <li class=\"text-item\">\n        <h2>Likes</h2>\n        <p>${item.likes}</p>\n      </li>\n       <li class=\"text-item\">\n        <h2>Views</h2>\n        <p>${item.views}</p>\n      </li>\n       <li class=\"text-item\">\n        <h2>Comments</h2>\n        <p>${item.comments}</p>\n      </li>\n       <li class=\"text-item\">\n        <h2>Downloads</h2>\n        <p>${item.downloads}</p>\n      </li>\n    </div></div>\n  `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  const lightBox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightBox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nconst loader = document.querySelector('.loader');\n\nexport function showLoader() {\n  loader.classList.add('active');\n}\n\nexport function hideLoader() {\n  loader.classList.remove('active');\n}\nexport const loadMoreBtn = document.querySelector('.load-more');\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.hidden = false;\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.hidden = true;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport getImagesByQuery from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  loadMoreBtn,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from '/js/render-functions.js';\n\nconst form = document.querySelector('.form');\n\nlet page = 1;\nlet query = '';\n\nform.addEventListener('submit', handlSubmit);\nasync function handlSubmit(event) {\n  event.preventDefault();\n\n  clearGallery();\n\n  query = form.elements['search-text'].value.trim();\n  if (!query) {\n    form.reset();\n    iziToast.error({\n      message: 'Please fill in the search field!',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n    });\n    return;\n  }\n  // const searchText = event.target.elements['search-text'].value;\n\n  showLoader();\n  hideLoadMoreButton();\n  try {\n    const { hits, totalHits } = await getImagesByQuery(query, page);\n\n    if (hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n      });\n      hideLoadMoreButton();\n      return;\n    }\n    hideLoader();\n    createGallery(hits);\n    checkEndOfCollection(totalHits);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\nloadMoreBtn.addEventListener('click', loadMore);\n\nasync function loadMore(event) {\n  const moreBtn = event.currentTarget;\n  if (!moreBtn) return;\n\n  page++;\n  hideLoadMoreButton();\n  moreBtn.disabled = true;\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await getImagesByQuery(query, page);\n\n    createGallery(hits);\n    setTimeout(() => smoothScroll(), 0);\n    checkEndOfCollection(totalHits);\n    moreBtn.disabled = false;\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong.Please try again later!',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction checkEndOfCollection(totalHits) {\n  if (page * 15 >= totalHits) {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n    });\n\n    hideLoadMoreButton();\n  } else {\n    showLoadMoreButton();\n  }\n}\n\nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const rect = galleryItem.getBoundingClientRect();\n  const heightItem = rect.height;\n\n  window.scrollBy({\n    top: heightItem * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImagesByQuery","query","page","axios","gallery","createGallery","images","markup","item","SimpleLightbox","clearGallery","loader","showLoader","hideLoader","loadMoreBtn","showLoadMoreButton","hideLoadMoreButton","form","handlSubmit","event","iziToast","hits","totalHits","checkEndOfCollection","error","loadMore","moreBtn","smoothScroll","heightItem"],"mappings":"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"}